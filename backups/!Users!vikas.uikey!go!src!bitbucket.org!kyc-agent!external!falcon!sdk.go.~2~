package falcon

import (
	"bitbucket.org/kyc-agent/common/http_client"
	"bitbucket.org/kyc-agent/config"
)

const (
	NO_IMAGE string = "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"

	logTag               = "external:falcon:"
	logGetImage          = logTag + "getImage"
	logGetMetaData       = logTag + "getMetadata"
	logUploadImage       = logTag + "uploadImage"
	logUploadBase64Image = logTag + "uplaodBase64Image"

	uploadImageUrl       = "/saving/compressed"
	UploadBase64ImageUrl = "/document/saving/kyc"
)

var falconHttpClient *http_client.HttpClientImpl

func Initialize() {
	falconHttpClient = &http_client.HttpClientImpl{}
	setFalconHttpClient()
}

func setFalconHttpClient() {
	falconHttpClient.Build(config.Config.Falcon.HostPort, config.Config.Falcon.ClientConfig)
}

func GetImage(request *GetImageRequest, requestID string) (*GetImageResponse, *FalconSDKError) {
	return getImage(request, requestID)
}

func GetMetadata(request *GetMetaDataRequest, requestID string) (GetMetaDataResponse, *FalconSDKError) {
	return getMetadata(request, requestID)
}

func UploadImage(request *UploadImageRequest, requestID string) (*UploadImageResponse, *FalconSDKError) {
	return uploadImage(request, requestID)
}

func UploadBase64Image(requestId string, request *UploadBase64ImageRequest) (*UploadBase64ImageResponse, *FalconSDKError) {
	return uplaodBase64Image(requestId, request)
}
