package astina

import (
	"bitbucket.org/kyc-agent/common/http_client"
	"bitbucket.org/kyc-agent/config"
)

const (
	logTag                   = "external:astina:"
	logSearchCustomerByPhone = logTag + "searchCustomerByPhone"
	customerSearchUrl        = "/v1.0/api/customers/check"
	clubToPremierUrl         = "/v1.0/api/customers/:ovoid/upgrade/premier"
)

var astinaHttpClient *http_client.HttpClientImpl

func Initialize() {
	astinaHttpClient = &http_client.HttpClientImpl{}
	setAstinaHttpClient()
}

func setAstinaHttpClient() {
	astinaHttpClient.Build(config.Config.Astina.HostPort, config.Config.Astina.ClientConfig)
}

func SearchCustomerByPhone(req *SearchCustomerByPhoneRequest, requestID string) (*Customer, *AstinaSDKError) {
	return searchCustomerByPhone(req, requestID)
}

func UpgradeAccountToPremier(req *ClubToPremier, requestId string) (*ClubToPremierResponse, *AstinaSDKError) {
	return updateClubToPremier(req, requestId)
}
