package users

import (
	"context"
	"encoding/json"
	"gitlab.com/vicky2135/stories/commons/funnel"
	"gitlab.com/vicky2135/stories/dto"
	"gitlab.com/vicky2135/stories/logic/users"
	"log"
	"net/http"
)

func CreateUserHandler(w http.ResponseWriter, r *http.Request, requestDTO funnel.ApiRequestDTO) (int, []byte) {

	req := requestDTO.(*dto.CreateUserRequest)

	ctx := context.Background()
	resp, err := users.CreateUser(ctx, req)

	log.Print(req)
	log.Println(resp, err)

	if err != nil {
		errBytes, _ := json.Marshal(err)
		return http.StatusBadRequest, errBytes
	}

	respBytes, _ := json.Marshal(resp)
	return http.StatusOK, respBytes
}

func LoginUser(w http.ResponseWriter, r *http.Request, requestDTO funnel.ApiRequestDTO) (int, []byte) {

	return 0, nil
}

func LogoutUser(w http.ResponseWriter, r *http.Request, requestDTO funnel.ApiRequestDTO) (int, []byte) {

	return 0, nil
}
